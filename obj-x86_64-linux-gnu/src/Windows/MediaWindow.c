/* MediaWindow.c generated by valac 0.26.1.9-22126, the Vala compiler
 * generated from MediaWindow.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <gst/gst.h>
#include <stdlib.h>
#include <string.h>
#include <gdk/gdk.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <stdio.h>


#define PHOTO_STREAM_WIDGETS_TYPE_MEDIA_WINDOW (photo_stream_widgets_media_window_get_type ())
#define PHOTO_STREAM_WIDGETS_MEDIA_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), PHOTO_STREAM_WIDGETS_TYPE_MEDIA_WINDOW, PhotoStreamWidgetsMediaWindow))
#define PHOTO_STREAM_WIDGETS_MEDIA_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), PHOTO_STREAM_WIDGETS_TYPE_MEDIA_WINDOW, PhotoStreamWidgetsMediaWindowClass))
#define PHOTO_STREAM_WIDGETS_IS_MEDIA_WINDOW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), PHOTO_STREAM_WIDGETS_TYPE_MEDIA_WINDOW))
#define PHOTO_STREAM_WIDGETS_IS_MEDIA_WINDOW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), PHOTO_STREAM_WIDGETS_TYPE_MEDIA_WINDOW))
#define PHOTO_STREAM_WIDGETS_MEDIA_WINDOW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), PHOTO_STREAM_WIDGETS_TYPE_MEDIA_WINDOW, PhotoStreamWidgetsMediaWindowClass))

typedef struct _PhotoStreamWidgetsMediaWindow PhotoStreamWidgetsMediaWindow;
typedef struct _PhotoStreamWidgetsMediaWindowClass PhotoStreamWidgetsMediaWindowClass;
typedef struct _PhotoStreamWidgetsMediaWindowPrivate PhotoStreamWidgetsMediaWindowPrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _gst_caps_unref0(var) ((var == NULL) ? NULL : (var = (gst_caps_unref (var), NULL)))

struct _PhotoStreamWidgetsMediaWindow {
	GtkWindow parent_instance;
	PhotoStreamWidgetsMediaWindowPrivate * priv;
	GtkBox* windowBox;
	GtkImage* image;
	GtkEventBox* eventBox;
	GtkDrawingArea* drawingArea;
	GstPipeline* pipeline;
	GstElement* src;
	GstElement* videoSink;
	GstElement* audioSink;
	GstElement* decode;
	GstElement* videoConvert;
	GstElement* audioConvert;
	gboolean video;
	gboolean videoPlaying;
	gboolean finishedPlaying;
};

struct _PhotoStreamWidgetsMediaWindowClass {
	GtkWindowClass parent_class;
};


static gpointer photo_stream_widgets_media_window_parent_class = NULL;
extern gchar* photo_stream_app_CACHE_URL;

GType photo_stream_widgets_media_window_get_type (void) G_GNUC_CONST;
enum  {
	PHOTO_STREAM_WIDGETS_MEDIA_WINDOW_DUMMY_PROPERTY
};
PhotoStreamWidgetsMediaWindow* photo_stream_widgets_media_window_new (const gchar* fileName, gboolean video);
PhotoStreamWidgetsMediaWindow* photo_stream_widgets_media_window_construct (GType object_type, const gchar* fileName, gboolean video);
void photo_stream_widgets_media_window_loadVideo (PhotoStreamWidgetsMediaWindow* self, const gchar* fileName);
gchar* getFileName (const gchar* url);
void downloadFile (const gchar* url, const gchar* filename, GError** error);
static void photo_stream_widgets_media_window_padAddedHandler (PhotoStreamWidgetsMediaWindow* self, GstElement* src, GstPad* new_pad);
static void _photo_stream_widgets_media_window_padAddedHandler_gst_element_pad_added (GstElement* _sender, GstPad* pad, gpointer self);
static gboolean __lambda29_ (PhotoStreamWidgetsMediaWindow* self, GstBus* bus, GstMessage* message);
static gboolean ___lambda29__gst_bus_func (GstBus* bus, GstMessage* message, gpointer self);
static gboolean __lambda30_ (PhotoStreamWidgetsMediaWindow* self, GdkEventButton* event);
void photo_stream_widgets_media_window_switchVideoPlayback (PhotoStreamWidgetsMediaWindow* self);
static gboolean ___lambda30__gtk_widget_button_release_event (GtkWidget* _sender, GdkEventButton* event, gpointer self);
static void photo_stream_widgets_media_window_linkPads (PhotoStreamWidgetsMediaWindow* self, GstPad* source, GstPad* destination, const gchar* new_pad_type);
static void photo_stream_widgets_media_window_real_destroy (GtkWidget* base);
static void photo_stream_widgets_media_window_finalize (GObject* obj);


PhotoStreamWidgetsMediaWindow* photo_stream_widgets_media_window_construct (GType object_type, const gchar* fileName, gboolean video) {
	PhotoStreamWidgetsMediaWindow * self = NULL;
	GtkEventBox* _tmp0_ = NULL;
	GtkBox* _tmp1_ = NULL;
	GtkEventBox* _tmp2_ = NULL;
	GtkBox* _tmp3_ = NULL;
	GtkEventBox* _tmp4_ = NULL;
	GtkEventBox* _tmp5_ = NULL;
	gboolean _tmp6_ = FALSE;
	gboolean _tmp7_ = FALSE;
#line 21 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_val_if_fail (fileName != NULL, NULL);
#line 21 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self = (PhotoStreamWidgetsMediaWindow*) g_object_new (object_type, NULL);
#line 23 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	gtk_window_set_resizable ((GtkWindow*) self, FALSE);
#line 24 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp0_ = (GtkEventBox*) gtk_event_box_new ();
#line 24 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_object_ref_sink (_tmp0_);
#line 24 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->eventBox);
#line 24 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->eventBox = _tmp0_;
#line 25 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp1_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
#line 25 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_object_ref_sink (_tmp1_);
#line 25 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->windowBox);
#line 25 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->windowBox = _tmp1_;
#line 27 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp2_ = self->eventBox;
#line 27 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp3_ = self->windowBox;
#line 27 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	gtk_container_add ((GtkContainer*) _tmp2_, (GtkWidget*) _tmp3_);
#line 28 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp4_ = self->eventBox;
#line 28 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) _tmp4_);
#line 30 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp5_ = self->eventBox;
#line 30 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	gtk_widget_set_events ((GtkWidget*) _tmp5_, (gint) GDK_BUTTON_RELEASE_MASK);
#line 32 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp6_ = video;
#line 32 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->video = _tmp6_;
#line 34 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp7_ = video;
#line 34 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp7_) {
#line 134 "MediaWindow.c"
		const gchar* _tmp8_ = NULL;
#line 35 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp8_ = fileName;
#line 35 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		photo_stream_widgets_media_window_loadVideo (self, _tmp8_);
#line 140 "MediaWindow.c"
	} else {
		const gchar* _tmp9_ = NULL;
		const gchar* _tmp10_ = NULL;
		gchar* _tmp11_ = NULL;
		gchar* _tmp12_ = NULL;
		gchar* _tmp13_ = NULL;
		gchar* _tmp14_ = NULL;
		GtkImage* _tmp15_ = NULL;
		GtkBox* _tmp16_ = NULL;
		GtkImage* _tmp17_ = NULL;
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp9_ = photo_stream_app_CACHE_URL;
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp10_ = fileName;
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp11_ = getFileName (_tmp10_);
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp12_ = _tmp11_;
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp13_ = g_strconcat (_tmp9_, _tmp12_, NULL);
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp14_ = _tmp13_;
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp15_ = (GtkImage*) gtk_image_new_from_file (_tmp14_);
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_object_ref_sink (_tmp15_);
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_g_object_unref0 (self->image);
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		self->image = _tmp15_;
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_g_free0 (_tmp14_);
#line 38 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_g_free0 (_tmp12_);
#line 39 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp16_ = self->windowBox;
#line 39 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp17_ = self->image;
#line 39 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		gtk_container_add ((GtkContainer*) _tmp16_, (GtkWidget*) _tmp17_);
#line 181 "MediaWindow.c"
	}
#line 21 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	return self;
#line 185 "MediaWindow.c"
}


PhotoStreamWidgetsMediaWindow* photo_stream_widgets_media_window_new (const gchar* fileName, gboolean video) {
#line 21 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	return photo_stream_widgets_media_window_construct (PHOTO_STREAM_WIDGETS_TYPE_MEDIA_WINDOW, fileName, video);
#line 192 "MediaWindow.c"
}


static void _photo_stream_widgets_media_window_padAddedHandler_gst_element_pad_added (GstElement* _sender, GstPad* pad, gpointer self) {
#line 87 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	photo_stream_widgets_media_window_padAddedHandler ((PhotoStreamWidgetsMediaWindow*) self, _sender, pad);
#line 199 "MediaWindow.c"
}


static gpointer _g_object_ref0 (gpointer self) {
#line 102 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	return self ? g_object_ref (self) : NULL;
#line 206 "MediaWindow.c"
}


static gboolean __lambda29_ (PhotoStreamWidgetsMediaWindow* self, GstBus* bus, GstMessage* message) {
	gboolean result = FALSE;
	GstMessage* _tmp0_ = NULL;
	GstMessageType _tmp1_ = 0;
	GValue videoValue = {0};
	GValue _tmp3_ = {0};
	GdkPixbuf* videoPixbuf = NULL;
	GstElement* _tmp4_ = NULL;
	GValue _tmp5_ = {0};
	GdkPixbuf* _tmp6_ = NULL;
	GtkImage* _tmp7_ = NULL;
	GdkPixbuf* _tmp8_ = NULL;
#line 92 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_val_if_fail (bus != NULL, FALSE);
#line 92 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_val_if_fail (message != NULL, FALSE);
#line 93 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp0_ = message;
#line 93 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp1_ = _tmp0_->type;
#line 93 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp1_ == GST_MESSAGE_EOS) {
#line 232 "MediaWindow.c"
		GstPipeline* _tmp2_ = NULL;
#line 95 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		self->finishedPlaying = TRUE;
#line 96 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp2_ = self->pipeline;
#line 96 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		gst_element_set_state ((GstElement*) _tmp2_, GST_STATE_READY);
#line 97 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		result = TRUE;
#line 97 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		return result;
#line 244 "MediaWindow.c"
	}
#line 99 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_value_init (&_tmp3_, GDK_TYPE_PIXBUF);
#line 99 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	videoValue = _tmp3_;
#line 101 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp4_ = self->videoSink;
#line 101 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_object_get_property ((GObject*) _tmp4_, "last-pixbuf", &videoValue);
#line 102 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp5_ = videoValue;
#line 102 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp6_ = _g_object_ref0 (g_value_get_object (&_tmp5_));
#line 102 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (videoPixbuf);
#line 102 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	videoPixbuf = _tmp6_;
#line 104 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp7_ = self->image;
#line 104 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp8_ = videoPixbuf;
#line 104 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	gtk_image_set_from_pixbuf (_tmp7_, _tmp8_);
#line 105 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	result = TRUE;
#line 105 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (videoPixbuf);
#line 105 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	G_IS_VALUE (&videoValue) ? (g_value_unset (&videoValue), NULL) : NULL;
#line 105 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	return result;
#line 276 "MediaWindow.c"
}


static gboolean ___lambda29__gst_bus_func (GstBus* bus, GstMessage* message, gpointer self) {
	gboolean result;
	result = __lambda29_ ((PhotoStreamWidgetsMediaWindow*) self, bus, message);
#line 92 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	return result;
#line 285 "MediaWindow.c"
}


static gboolean __lambda30_ (PhotoStreamWidgetsMediaWindow* self, GdkEventButton* event) {
	gboolean result = FALSE;
	GdkEventButton* _tmp0_ = NULL;
	guint _tmp1_ = 0U;
#line 111 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_val_if_fail (event != NULL, FALSE);
#line 112 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp0_ = event;
#line 112 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp1_ = _tmp0_->button;
#line 112 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp1_ == ((guint) 1)) {
#line 113 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		photo_stream_widgets_media_window_switchVideoPlayback (self);
#line 303 "MediaWindow.c"
	}
#line 115 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	result = FALSE;
#line 115 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	return result;
#line 309 "MediaWindow.c"
}


static gboolean ___lambda30__gtk_widget_button_release_event (GtkWidget* _sender, GdkEventButton* event, gpointer self) {
	gboolean result;
	result = __lambda30_ ((PhotoStreamWidgetsMediaWindow*) self, event);
#line 111 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	return result;
#line 318 "MediaWindow.c"
}


void photo_stream_widgets_media_window_loadVideo (PhotoStreamWidgetsMediaWindow* self, const gchar* fileName) {
	gchar* downloadFileName = NULL;
	const gchar* _tmp0_ = NULL;
	const gchar* _tmp1_ = NULL;
	gchar* _tmp2_ = NULL;
	gchar* _tmp3_ = NULL;
	gchar* _tmp4_ = NULL;
	gchar* _tmp5_ = NULL;
	GstPipeline* _tmp7_ = NULL;
	GstElement* _tmp8_ = NULL;
	GstElement* _tmp9_ = NULL;
	GstElement* _tmp10_ = NULL;
	GstElement* _tmp11_ = NULL;
	GstElement* _tmp12_ = NULL;
	GstElement* _tmp13_ = NULL;
	GstElement* _tmp14_ = NULL;
	GstPipeline* _tmp15_ = NULL;
	GstElement* _tmp16_ = NULL;
	GstElement* _tmp17_ = NULL;
	GstElement* _tmp18_ = NULL;
	GstElement* _tmp19_ = NULL;
	GstElement* _tmp20_ = NULL;
	GstElement* _tmp21_ = NULL;
	GstElement* _tmp22_ = NULL;
	GstElement* _tmp23_ = NULL;
	GstElement* _tmp24_ = NULL;
	GstElement* _tmp25_ = NULL;
	GstElement* _tmp26_ = NULL;
	GstElement* _tmp27_ = NULL;
	GstElement* _tmp28_ = NULL;
	GstElement* _tmp29_ = NULL;
	gboolean _tmp30_ = FALSE;
	GstElement* _tmp31_ = NULL;
	GstElement* _tmp32_ = NULL;
	gboolean _tmp33_ = FALSE;
	GstElement* _tmp34_ = NULL;
	GstElement* _tmp35_ = NULL;
	gboolean _tmp36_ = FALSE;
	GstElement* _tmp37_ = NULL;
	GtkDrawingArea* _tmp38_ = NULL;
	GtkBox* _tmp39_ = NULL;
	GtkDrawingArea* _tmp40_ = NULL;
	GstPipeline* _tmp41_ = NULL;
	GstBus* _tmp42_ = NULL;
	GstBus* _tmp43_ = NULL;
	GtkImage* _tmp44_ = NULL;
	GtkBox* _tmp45_ = NULL;
	GtkImage* _tmp46_ = NULL;
	GtkEventBox* _tmp47_ = NULL;
	GstPipeline* _tmp48_ = NULL;
	GError * _inner_error_ = NULL;
#line 43 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_if_fail (self != NULL);
#line 43 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_if_fail (fileName != NULL);
#line 45 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp0_ = photo_stream_app_CACHE_URL;
#line 45 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp1_ = fileName;
#line 45 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp2_ = getFileName (_tmp1_);
#line 45 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp3_ = _tmp2_;
#line 45 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp4_ = g_strconcat (_tmp0_, _tmp3_, NULL);
#line 45 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp5_ = _tmp4_;
#line 45 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_free0 (_tmp3_);
#line 45 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	downloadFileName = _tmp5_;
#line 393 "MediaWindow.c"
	{
		const gchar* _tmp6_ = NULL;
#line 48 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp6_ = fileName;
#line 48 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		downloadFile (_tmp6_, downloadFileName, &_inner_error_);
#line 48 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 402 "MediaWindow.c"
			goto __catch66_g_error;
		}
	}
	goto __finally66;
	__catch66_g_error:
	{
		GError* e = NULL;
#line 46 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		e = _inner_error_;
#line 46 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_inner_error_ = NULL;
#line 52 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_error ("MediaWindow.vala:52: Video cannot be loaded.");
#line 46 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_g_error_free0 (e);
#line 418 "MediaWindow.c"
	}
	__finally66:
#line 46 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (G_UNLIKELY (_inner_error_ != NULL)) {
#line 46 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_g_free0 (downloadFileName);
#line 46 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
#line 46 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_clear_error (&_inner_error_);
#line 46 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		return;
#line 431 "MediaWindow.c"
	}
#line 55 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp7_ = (GstPipeline*) gst_pipeline_new ("mypipeline");
#line 55 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_object_ref_sink (_tmp7_);
#line 55 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->pipeline);
#line 55 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->pipeline = _tmp7_;
#line 56 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp8_ = gst_element_factory_make ("filesrc", "video");
#line 56 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp8_ != NULL) {
#line 56 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_object_ref_sink (_tmp8_);
#line 447 "MediaWindow.c"
	}
#line 56 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->src);
#line 56 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->src = _tmp8_;
#line 57 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp9_ = self->src;
#line 57 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_object_set ((GObject*) _tmp9_, "location", downloadFileName, NULL);
#line 58 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp10_ = gst_element_factory_make ("decodebin", "decode");
#line 58 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp10_ != NULL) {
#line 58 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_object_ref_sink (_tmp10_);
#line 463 "MediaWindow.c"
	}
#line 58 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->decode);
#line 58 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->decode = _tmp10_;
#line 59 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp11_ = gst_element_factory_make ("videoconvert", "videoConvert");
#line 59 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp11_ != NULL) {
#line 59 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_object_ref_sink (_tmp11_);
#line 475 "MediaWindow.c"
	}
#line 59 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->videoConvert);
#line 59 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->videoConvert = _tmp11_;
#line 60 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp12_ = gst_element_factory_make ("audioconvert", "audioConvert");
#line 60 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp12_ != NULL) {
#line 60 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_object_ref_sink (_tmp12_);
#line 487 "MediaWindow.c"
	}
#line 60 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->audioConvert);
#line 60 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->audioConvert = _tmp12_;
#line 61 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp13_ = gst_element_factory_make ("gdkpixbufsink", "videoSink");
#line 61 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp13_ != NULL) {
#line 61 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_object_ref_sink (_tmp13_);
#line 499 "MediaWindow.c"
	}
#line 61 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->videoSink);
#line 61 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->videoSink = _tmp13_;
#line 62 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp14_ = gst_element_factory_make ("autoaudiosink", "audioSink");
#line 62 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp14_ != NULL) {
#line 62 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_object_ref_sink (_tmp14_);
#line 511 "MediaWindow.c"
	}
#line 62 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->audioSink);
#line 62 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->audioSink = _tmp14_;
#line 63 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp15_ = self->pipeline;
#line 63 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp16_ = self->src;
#line 63 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp17_ = self->decode;
#line 63 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp18_ = self->videoConvert;
#line 63 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp19_ = self->audioConvert;
#line 63 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp20_ = self->audioSink;
#line 63 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp21_ = self->videoSink;
#line 63 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	gst_bin_add_many ((GstBin*) _tmp15_, _tmp16_, _tmp17_, _tmp18_, _tmp19_, _tmp20_, _tmp21_, NULL);
#line 66 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp22_ = self->src;
#line 66 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp22_ == NULL) {
#line 67 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_error ("MediaWindow.vala:67: Gstreamer element init error 1");
#line 539 "MediaWindow.c"
	}
#line 68 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp23_ = self->decode;
#line 68 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp23_ == NULL) {
#line 69 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_error ("MediaWindow.vala:69: Gstreamer element init error 2");
#line 547 "MediaWindow.c"
	}
#line 70 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp24_ = self->videoSink;
#line 70 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp24_ == NULL) {
#line 71 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_error ("MediaWindow.vala:71: Gstreamer element init error 3");
#line 555 "MediaWindow.c"
	}
#line 72 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp25_ = self->videoConvert;
#line 72 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp25_ == NULL) {
#line 73 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_error ("MediaWindow.vala:73: Gstreamer element init error 4");
#line 563 "MediaWindow.c"
	}
#line 74 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp26_ = self->audioSink;
#line 74 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp26_ == NULL) {
#line 75 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_error ("MediaWindow.vala:75: Gstreamer element init error 5");
#line 571 "MediaWindow.c"
	}
#line 76 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp27_ = self->audioConvert;
#line 76 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp27_ == NULL) {
#line 77 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_error ("MediaWindow.vala:77: Gstreamer element init error 6");
#line 579 "MediaWindow.c"
	}
#line 80 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp28_ = self->src;
#line 80 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp29_ = self->decode;
#line 80 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp30_ = gst_element_link (_tmp28_, _tmp29_);
#line 80 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (!_tmp30_) {
#line 81 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_error ("MediaWindow.vala:81: GStreamer linking problems.");
#line 591 "MediaWindow.c"
	}
#line 82 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp31_ = self->videoConvert;
#line 82 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp32_ = self->videoSink;
#line 82 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp33_ = gst_element_link (_tmp31_, _tmp32_);
#line 82 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (!_tmp33_) {
#line 83 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_error ("MediaWindow.vala:83: GStreamer linking problems 2.");
#line 603 "MediaWindow.c"
	}
#line 84 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp34_ = self->audioConvert;
#line 84 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp35_ = self->audioSink;
#line 84 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp36_ = gst_element_link (_tmp34_, _tmp35_);
#line 84 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (!_tmp36_) {
#line 85 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		g_error ("MediaWindow.vala:85: GStreamer linking problems 3.");
#line 615 "MediaWindow.c"
	}
#line 87 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp37_ = self->decode;
#line 87 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_signal_connect_object (_tmp37_, "pad-added", (GCallback) _photo_stream_widgets_media_window_padAddedHandler_gst_element_pad_added, self, 0);
#line 89 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp38_ = (GtkDrawingArea*) gtk_drawing_area_new ();
#line 89 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_object_ref_sink (_tmp38_);
#line 89 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->drawingArea);
#line 89 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->drawingArea = _tmp38_;
#line 90 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp39_ = self->windowBox;
#line 90 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp40_ = self->drawingArea;
#line 90 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	gtk_box_pack_start (_tmp39_, (GtkWidget*) _tmp40_, TRUE, TRUE, (guint) 0);
#line 92 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp41_ = self->pipeline;
#line 92 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp42_ = gst_pipeline_get_bus (_tmp41_);
#line 92 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp43_ = _tmp42_;
#line 92 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	gst_bus_add_watch_full (_tmp43_, 0, ___lambda29__gst_bus_func, g_object_ref (self), g_object_unref);
#line 92 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (_tmp43_);
#line 107 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp44_ = (GtkImage*) gtk_image_new ();
#line 107 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_object_ref_sink (_tmp44_);
#line 107 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->image);
#line 107 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->image = _tmp44_;
#line 108 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp45_ = self->windowBox;
#line 108 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp46_ = self->image;
#line 108 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	gtk_container_add ((GtkContainer*) _tmp45_, (GtkWidget*) _tmp46_);
#line 109 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	gtk_widget_show_all ((GtkWidget*) self);
#line 111 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp47_ = self->eventBox;
#line 111 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_signal_connect_object ((GtkWidget*) _tmp47_, "button-release-event", (GCallback) ___lambda30__gtk_widget_button_release_event, self, 0);
#line 118 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp48_ = self->pipeline;
#line 118 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	gst_element_set_state ((GstElement*) _tmp48_, GST_STATE_PLAYING);
#line 119 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->videoPlaying = TRUE;
#line 43 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_free0 (downloadFileName);
#line 673 "MediaWindow.c"
}


static void photo_stream_widgets_media_window_padAddedHandler (PhotoStreamWidgetsMediaWindow* self, GstElement* src, GstPad* new_pad) {
	GstPad* videoSinkPad = NULL;
	GstElement* _tmp0_ = NULL;
	GstPad* _tmp1_ = NULL;
	GstPad* audioSinkPad = NULL;
	GstElement* _tmp2_ = NULL;
	GstPad* _tmp3_ = NULL;
	FILE* _tmp4_ = NULL;
	GstPad* _tmp5_ = NULL;
	gchar* _tmp6_ = NULL;
	gchar* _tmp7_ = NULL;
	gchar* _tmp8_ = NULL;
	GstElement* _tmp9_ = NULL;
	gchar* _tmp10_ = NULL;
	gchar* _tmp11_ = NULL;
	gchar* _tmp12_ = NULL;
	GstCaps* new_pad_caps = NULL;
	GstPad* _tmp13_ = NULL;
	GstCaps* _tmp14_ = NULL;
	GstStructure* new_pad_struct = NULL;
	GstCaps* _tmp15_ = NULL;
	GstStructure* _tmp16_ = NULL;
	gchar* new_pad_type = NULL;
	GstStructure* _tmp17_ = NULL;
	const gchar* _tmp18_ = NULL;
	gchar* _tmp19_ = NULL;
	const gchar* _tmp20_ = NULL;
	gboolean _tmp21_ = FALSE;
#line 122 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_if_fail (self != NULL);
#line 122 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_if_fail (src != NULL);
#line 122 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_if_fail (new_pad != NULL);
#line 124 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp0_ = self->videoConvert;
#line 124 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp1_ = gst_element_get_static_pad (_tmp0_, "sink");
#line 124 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	videoSinkPad = _tmp1_;
#line 125 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp2_ = self->audioConvert;
#line 125 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp3_ = gst_element_get_static_pad (_tmp2_, "sink");
#line 125 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	audioSinkPad = _tmp3_;
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp4_ = stdout;
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp5_ = new_pad;
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_object_get ((GstObject*) _tmp5_, "name", &_tmp6_, NULL);
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp7_ = _tmp6_;
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp8_ = _tmp7_;
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp9_ = src;
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_object_get ((GstObject*) _tmp9_, "name", &_tmp10_, NULL);
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp11_ = _tmp10_;
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp12_ = _tmp11_;
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	fprintf (_tmp4_, "Received new pad '%s' from '%s':\n", _tmp8_, _tmp12_);
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_free0 (_tmp12_);
#line 126 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_free0 (_tmp8_);
#line 128 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp13_ = new_pad;
#line 128 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp14_ = gst_pad_query_caps (_tmp13_, NULL);
#line 128 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	new_pad_caps = _tmp14_;
#line 129 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp15_ = new_pad_caps;
#line 129 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp16_ = gst_caps_get_structure (_tmp15_, (guint) 0);
#line 129 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	new_pad_struct = _tmp16_;
#line 130 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp17_ = new_pad_struct;
#line 130 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp18_ = gst_structure_get_name (_tmp17_);
#line 130 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp19_ = g_strdup (_tmp18_);
#line 130 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	new_pad_type = _tmp19_;
#line 131 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp20_ = new_pad_type;
#line 131 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp21_ = g_str_has_prefix (_tmp20_, "audio/x-raw");
#line 131 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp21_) {
#line 773 "MediaWindow.c"
		FILE* _tmp22_ = NULL;
		const gchar* _tmp23_ = NULL;
		GstPad* _tmp24_ = NULL;
		GstPad* _tmp25_ = NULL;
		const gchar* _tmp26_ = NULL;
#line 133 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp22_ = stdout;
#line 133 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp23_ = new_pad_type;
#line 133 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		fprintf (_tmp22_, "  It has audio type '%s', loading.\n", _tmp23_);
#line 134 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp24_ = new_pad;
#line 134 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp25_ = audioSinkPad;
#line 134 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp26_ = new_pad_type;
#line 134 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		photo_stream_widgets_media_window_linkPads (self, _tmp24_, _tmp25_, _tmp26_);
#line 135 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_g_free0 (new_pad_type);
#line 135 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_gst_caps_unref0 (new_pad_caps);
#line 135 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_g_object_unref0 (audioSinkPad);
#line 135 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_g_object_unref0 (videoSinkPad);
#line 135 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		return;
#line 803 "MediaWindow.c"
	} else {
		FILE* _tmp27_ = NULL;
		const gchar* _tmp28_ = NULL;
		GstPad* _tmp29_ = NULL;
		GstPad* _tmp30_ = NULL;
		const gchar* _tmp31_ = NULL;
#line 139 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp27_ = stdout;
#line 139 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp28_ = new_pad_type;
#line 139 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		fprintf (_tmp27_, "  It has video type '%s', loading.\n", _tmp28_);
#line 140 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp29_ = new_pad;
#line 140 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp30_ = videoSinkPad;
#line 140 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp31_ = new_pad_type;
#line 140 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		photo_stream_widgets_media_window_linkPads (self, _tmp29_, _tmp30_, _tmp31_);
#line 141 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_g_free0 (new_pad_type);
#line 141 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_gst_caps_unref0 (new_pad_caps);
#line 141 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_g_object_unref0 (audioSinkPad);
#line 141 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_g_object_unref0 (videoSinkPad);
#line 141 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		return;
#line 834 "MediaWindow.c"
	}
#line 122 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_free0 (new_pad_type);
#line 122 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_gst_caps_unref0 (new_pad_caps);
#line 122 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (audioSinkPad);
#line 122 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (videoSinkPad);
#line 844 "MediaWindow.c"
}


static void photo_stream_widgets_media_window_linkPads (PhotoStreamWidgetsMediaWindow* self, GstPad* source, GstPad* destination, const gchar* new_pad_type) {
	GstPadLinkReturn ret = 0;
	GstPad* _tmp0_ = NULL;
	GstPad* _tmp1_ = NULL;
	GstPadLinkReturn _tmp2_ = 0;
	GstPadLinkReturn _tmp3_ = 0;
#line 144 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_if_fail (self != NULL);
#line 144 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_if_fail (source != NULL);
#line 144 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_if_fail (destination != NULL);
#line 144 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_if_fail (new_pad_type != NULL);
#line 147 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp0_ = source;
#line 147 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp1_ = destination;
#line 147 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp2_ = gst_pad_link_full (_tmp0_, _tmp1_, GST_PAD_LINK_CHECK_DEFAULT);
#line 147 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	ret = _tmp2_;
#line 148 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp3_ = ret;
#line 148 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp3_ != GST_PAD_LINK_OK) {
#line 874 "MediaWindow.c"
		FILE* _tmp4_ = NULL;
		const gchar* _tmp5_ = NULL;
#line 149 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp4_ = stdout;
#line 149 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp5_ = new_pad_type;
#line 149 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		fprintf (_tmp4_, "  Type is '%s' but link failed.\n", _tmp5_);
#line 883 "MediaWindow.c"
	} else {
		FILE* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
#line 151 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp6_ = stdout;
#line 151 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp7_ = new_pad_type;
#line 151 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		fprintf (_tmp6_, "  Link succeeded (type '%s').\n", _tmp7_);
#line 893 "MediaWindow.c"
	}
}


void photo_stream_widgets_media_window_switchVideoPlayback (PhotoStreamWidgetsMediaWindow* self) {
	gboolean _tmp0_ = FALSE;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp5_ = FALSE;
#line 155 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	g_return_if_fail (self != NULL);
#line 157 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp0_ = self->finishedPlaying;
#line 157 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp0_) {
#line 908 "MediaWindow.c"
		GstPipeline* _tmp1_ = NULL;
#line 159 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp1_ = self->pipeline;
#line 159 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		gst_element_set_state ((GstElement*) _tmp1_, GST_STATE_PLAYING);
#line 160 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		self->finishedPlaying = FALSE;
#line 916 "MediaWindow.c"
	}
#line 162 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp2_ = self->videoPlaying;
#line 162 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp2_ == TRUE) {
#line 922 "MediaWindow.c"
		GstPipeline* _tmp3_ = NULL;
#line 164 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp3_ = self->pipeline;
#line 164 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		gst_element_set_state ((GstElement*) _tmp3_, GST_STATE_PAUSED);
#line 928 "MediaWindow.c"
	} else {
		GstPipeline* _tmp4_ = NULL;
#line 168 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp4_ = self->pipeline;
#line 168 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		gst_element_set_state ((GstElement*) _tmp4_, GST_STATE_PLAYING);
#line 935 "MediaWindow.c"
	}
#line 171 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp5_ = self->videoPlaying;
#line 171 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->videoPlaying = !_tmp5_;
#line 941 "MediaWindow.c"
}


static void photo_stream_widgets_media_window_real_destroy (GtkWidget* base) {
	PhotoStreamWidgetsMediaWindow * self;
	gboolean _tmp0_ = FALSE;
#line 174 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self = (PhotoStreamWidgetsMediaWindow*) base;
#line 176 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_tmp0_ = self->video;
#line 176 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	if (_tmp0_) {
#line 954 "MediaWindow.c"
		GstPipeline* _tmp1_ = NULL;
#line 177 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		_tmp1_ = self->pipeline;
#line 177 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
		gst_element_set_state ((GstElement*) _tmp1_, GST_STATE_READY);
#line 960 "MediaWindow.c"
	}
}


static void photo_stream_widgets_media_window_class_init (PhotoStreamWidgetsMediaWindowClass * klass) {
#line 3 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	photo_stream_widgets_media_window_parent_class = g_type_class_peek_parent (klass);
#line 3 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	((GtkWidgetClass *) klass)->destroy = photo_stream_widgets_media_window_real_destroy;
#line 3 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	G_OBJECT_CLASS (klass)->finalize = photo_stream_widgets_media_window_finalize;
#line 972 "MediaWindow.c"
}


static void photo_stream_widgets_media_window_instance_init (PhotoStreamWidgetsMediaWindow * self) {
#line 18 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->videoPlaying = FALSE;
#line 19 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self->finishedPlaying = FALSE;
#line 981 "MediaWindow.c"
}


static void photo_stream_widgets_media_window_finalize (GObject* obj) {
	PhotoStreamWidgetsMediaWindow * self;
#line 3 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, PHOTO_STREAM_WIDGETS_TYPE_MEDIA_WINDOW, PhotoStreamWidgetsMediaWindow);
#line 5 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->windowBox);
#line 6 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->image);
#line 7 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->eventBox);
#line 9 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->drawingArea);
#line 10 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->pipeline);
#line 11 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->src);
#line 12 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->videoSink);
#line 13 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->audioSink);
#line 14 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->decode);
#line 15 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->videoConvert);
#line 16 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	_g_object_unref0 (self->audioConvert);
#line 3 "/all/Documents/Programming/vala/photostream/src/Windows/MediaWindow.vala"
	G_OBJECT_CLASS (photo_stream_widgets_media_window_parent_class)->finalize (obj);
#line 1013 "MediaWindow.c"
}


GType photo_stream_widgets_media_window_get_type (void) {
	static volatile gsize photo_stream_widgets_media_window_type_id__volatile = 0;
	if (g_once_init_enter (&photo_stream_widgets_media_window_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (PhotoStreamWidgetsMediaWindowClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) photo_stream_widgets_media_window_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (PhotoStreamWidgetsMediaWindow), 0, (GInstanceInitFunc) photo_stream_widgets_media_window_instance_init, NULL };
		GType photo_stream_widgets_media_window_type_id;
		photo_stream_widgets_media_window_type_id = g_type_register_static (gtk_window_get_type (), "PhotoStreamWidgetsMediaWindow", &g_define_type_info, 0);
		g_once_init_leave (&photo_stream_widgets_media_window_type_id__volatile, photo_stream_widgets_media_window_type_id);
	}
	return photo_stream_widgets_media_window_type_id__volatile;
}



